<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui"
                template="/frontend/template/template_detail.xhtml">
    <f:metadata>
        <f:event type="preRenderView" listener="#{authorizationFEController.initCompanyAccount}"/>
    </f:metadata>

    <ui:define name="title">Tài khoản của tôi</ui:define>
    <ui:param name="bodyStyleClass" value="about"/>
    <ui:param name="headerStyleClass" value="is-sticky fixed-header"/>

    <ui:define name="breadcrumb">
        <li>Tài khoản của tôi</li>
    </ui:define>

    <ui:define name="screenTitle">
        <h2>Tài khoản của tôi</h2>
    </ui:define>

    <ui:define name="content">
        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12 update-info">
                <div class="register-area">
                    <div class="register-form">
                        <h:form role="form" id="company-account" prependId="false" autocomplete="off">
                            <div class="row">
                                <div id="personal-content-form" class="personal box active">
                                    <div class="warning-text col-md-12 col-xs-12 col-sm-12">
                                        <p>(*) là các trường bắt buộc</p>
                                    </div>
                                    <div class="col-md-6 col-xs-12 col-sm-12">
                                        <div class="form-wrap">
                                            <div class="form-group">
                                                <div class="row">
                                                    <label class="col-md-4 col-sm-4 col-xs-12 required-label">Tên tổ chức:</label>
                                                    <div class="col-md-8 col-sm-8 col-xs-12">
                                                        <h:inputText class="form-control" name="company_name" type="text" placeholder="Nhập tên tổ chức" id="company_name"
                                                                     onblur="this.value = this.value.trim()" autofocus=""
                                                                     value="#{authorizationFEController.accountDto.orgName}" maxlength="200"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <label class="col-md-4 col-sm-4 col-xs-12 required-label">Địa chỉ:</label>
                                                    <div class="col-md-8 col-sm-8 col-xs-12">
                                                        <ui:include src="/frontend/common/address.xhtml"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <label class="col-md-4 col-sm-4 col-xs-12 required-label">Địa chỉ tổ chức:</label>
                                                    <div class="col-md-8 col-sm-8 col-xs-12">
                                                        <h:inputText styleClass="form-control" name="address" id="address" type="text" maxlength="100" placeholder = "Địa chỉ tổ chức"
                                                                     onblur="this.value = this.value.trim()"
                                                                     value="#{authorizationFEController.accountDto.orgAddress}"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <label class="col-md-4 col-sm-4 col-xs-12 required-label">Điện thoại tổ chức:</label>
                                                    <div class="col-md-8 col-sm-8 col-xs-12">
                                                        <h:inputText type="text" placeholder="Nhập số điện thoại tổ chức"
                                                                     onkeyup="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" onblur="this.value = this.value.trim()"
                                                                     class="form-control" name="company_phone_number" id="company_phone_number"
                                                                     value="#{authorizationFEController.accountDto.orgPhone}" maxlength = "11" size="12"/>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <label class="col-md-4 col-sm-4 col-xs-12 required-label">Người đại diện:</label>
                                                    <div class="col-md-8 col-sm-8 col-xs-12">
                                                        <h:inputText class="form-control" name="name_company" type="text" placeholder="Nhập tên người đại diện" id="name_company"
                                                                     onblur="this.value = this.value.trim()"
                                                                     value="#{authorizationFEController.accountDto.fullName}" maxlength="50"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <label class="col-md-4 col-sm-4 col-xs-12 required-label">Giới tính:</label>
                                                    <div class="col-md-8 col-sm-8 col-xs-12">
                                                        <h:selectOneMenu class="form-control" id="c_sex"
                                                                         value="#{authorizationFEController.accountDto.sex}">
                                                            <f:selectItem itemLabel="Chọn giới tính" itemValue=""/>
                                                            <f:selectItems value="#{authorizationFEController.apiSexList}"/>
                                                        </h:selectOneMenu>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <label class="col-md-4 col-sm-4 col-xs-12 required-label">Tên đăng nhập:</label>
                                                    <div class="col-md-8 col-sm-8 col-xs-12">
                                                        <h:inputText class="form-control" name="company_userName" type="text" disabled="true" id="company_userName"
                                                                     value="#{authorizationFEController.accountDto.username}" onblur="this.value = this.value.trim()"
                                                                     onkeyup="this.value=this.value.replace(/[^\w\d\.\_]/g, '');" maxlength="50"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <label class="col-md-4 col-sm-4 col-xs-12 required-label">Số ĐKKD:</label>
                                                    <div class="col-md-8 col-sm-8 col-xs-12">
                                                        <h:inputText class="form-control" name="company_DKKD" type="text" placeholder="Nhập số đăng ký kinh doanh" id="company_DKKD"
                                                                     onblur="this.value = this.value.trim()"
                                                                     value="#{authorizationFEController.accountDto.businessLicense}" maxlength="15"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <ui:include src="/common/frontend/upload-business-license.xhtml"/>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-xs-12 col-sm-12">
                                        <div class="form-wrap">
                                            <div class="form-group">
                                            <div class="row">
                                                <label class="col-md-4 col-sm-4 col-xs-12 required-label">Chức vụ NĐD:</label>
                                                <div class="col-md-8 col-sm-8 col-xs-12">
                                                    <h:inputText class="form-control" name="company_position" id="company_position"
                                                                 type="text" placeholder="Nhập chức vụ"
                                                                 onblur="this.value = this.value.trim()"
                                                                 value="#{authorizationFEController.accountDto.position}" maxlength="50"/>
                                                </div>
                                            </div>
                                        </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <label class="col-md-4 col-sm-4 col-xs-12 required-label">Số điện thoại:</label>
                                                    <div class="col-md-8 col-sm-8 col-xs-12">
                                                        <h:inputText type="text" placeholder="Nhập số điện thoại"
                                                                     onkeyup="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" onblur="this.value = this.value.trim()"
                                                                     class="form-control" name="phone_number" id="phone_number"
                                                                     value="#{authorizationFEController.accountDto.phone}" maxlength = "11" size="12" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <label class="col-md-4 col-sm-4 col-xs-12 required-label">Số CMND/CCCD:</label>
                                                    <div class="col-md-8 col-sm-8 col-xs-12">
                                                        <h:inputText class="form-control" name="company_cmnd" type="text" placeholder="Nhập CMND/CCCD" id="company_cmnd"
                                                                     onkeyup="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" onblur="this.value = this.value.trim()"
                                                                     value="#{authorizationFEController.accountDto.idCardNumber}"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <label class="col-md-4 col-sm-4 col-xs-12 required-label">Nơi cấp:</label>
                                                    <div class="col-md-8 col-sm-8 col-xs-12">
                                                        <h:selectOneMenu styleClass="form-control tinhThanhpho_select" name="company_noicap" id="company_noicap"
                                                                         value="#{authorizationFEController.accountDto.provinceIdOfIssue}">
                                                            <f:selectItem itemValue="" itemLabel="Chọn Tỉnh/Thành phố"/>
                                                            <f:selectItems value="#{authorizationFEController.listProvinceAccount}"/>
                                                        </h:selectOneMenu>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <label class="col-md-4 col-sm-4 col-xs-12 required-label">Ngày cấp:</label>
                                                    <div class="col-md-8 col-sm-8 col-xs-12">
                                                        <div class='input-group date'>
                                                            <h:inputText styleClass="form-control datetimepicker1" placeholder="Chọn ngày cấp" readonly="false"
                                                                         name="company_ngaycap" id="company_ngaycap" onfocus="focusRemoveReadOnly(this);"
                                                                         value="#{authorizationFEController.accountDto.dateOfIssue}">
                                                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                                                            </h:inputText>
                                                            <span class="input-group-addon" onclick="document.getElementById('company_ngaycap').focus()"><i class="custom-icon calendar"/>
                                                        </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <label class="col-md-4 col-sm-4 col-xs-12 required-label">Hộ khẩu thường trú:</label>
                                                    <div class="col-md-8 col-sm-8 col-xs-12">
                                                        <h:inputText styleClass="form-control" name="company_address_now" type="text" maxlength="100" placeholder="Nhập hộ khẩu thường trú"
                                                                     id="company_address_now"
                                                                     onblur="this.value = this.value.trim()"
                                                                     value="#{authorizationFEController.accountDto.permanentResidence}"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <label class="col-md-4 col-sm-4 col-xs-12 required-label">Email:</label>
                                                    <div class="col-md-8 col-sm-8 col-xs-12">
                                                        <h:inputText class="form-control" name="company_email" placeholder="Nhập email" id="company_email"
                                                                     maxlength="50" type="email" value="#{authorizationFEController.accountDto.email}"/>
                                                    </div>
                                                </div>
                                            </div>

                                            <ui:include src="/common/frontend/upload-image-avatar.xhtml"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="row mt-30">
                                    <div class="col-md-12 col-xs-12 col-sm-12 submit-area text-center">
                                        <input id="btnUpdate" onclick="validateForm()" class="btn btn-custom btn-success" value="Cập nhật" type="submit">
                                        </input>
                                        <h:commandButton id="updateCompany" style="display: none !important;"
                                                         class="btn btn-custom main-color" value="Cập nhật"
                                                         action="#{authorizationFEController.onSaveData}">
                                            <f:ajax execute="@form" render="btnUpdate #{Constant.ERROR_FE_GROWL_ID}"/>
                                        </h:commandButton>
                                    </div>
                                </div>
                            </div>
                        </h:form>
                    </div>
                </div>
            </div>
        </div>
        <script>
            jQuery(".datetimepicker1").mask('99/99/9999');
            function focusRemoveReadOnly(e) {
                if (e.getAttribute('readonly') !== null) {
                    e.removeAttribute('readonly');
                    e.blur();
                    setTimeout(function() {
                        e.focus();
                    }, 10)
                }
            }
        </script>
    </ui:define>
</ui:composition>
