<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/admin/template/template.xhtml">
    <f:metadata>
        <f:event type="preRenderView" listener="#{apiOfficialsController.initData}"/>
    </f:metadata>

    <ui:define name="title">Danh mục công chức</ui:define>

    <ui:define name="breadcrumb">
        <li>
            <p:link outcome="/admin/api/danh_muc_cong_chuc">Danh mục API / Danh mục công chức</p:link>
        </li>
    </ui:define>
    <ui:define name="content">
        <h:form id="searchForm">
            <div class="ui-fluid">
                <div class="ui-g">
                    <div class="ui-g-12" style="padding-top:0">
                        <div class="card no-margin">
                            <p:panelGrid columns="2" styleClass="ui-panelgrid-blank" layout="grid"
                                         columnClasses="ui-grid-col-1.5 ui-no-margin-padding, ui-grid-col-1.5 ui-no-margin-padding">
                                    <p:commandButton value="Đồng bộ dữ liệu" style="width: auto; margin-bottom: 10px;"
                                                     actionListener="#{apiOfficialsController.api}"
                                                     rendered="#{apiOfficialsController.getActions().hasAction(EAction.SYNC)}"
                                                     update="searchForm tblSearchResult growl" icon="fa fa-refresh"/>
                            <p:commandButton value="Xuất dữ liệu" style="width: auto; margin-bottom: 10px;left :10px" icon="fa fa-copy" update="growl" ajax="false" rendered="#{apiOfficialsController.lazyDataModel.rowCount gt 0}">
                                <p:dataExporter type="xlsxstream" target="tblSearchResult" fileName="Danh sách thông tin danh mục công chức" />
                            </p:commandButton>
                        </p:panelGrid>
                            <p:panel id="searchResult" header="Kết quả tìm kiếm" style="margin-bottom:5px">
                                <p:dataTable id="tblSearchResult" tableStyle="table-layout: auto;"
                                             widgetVar="wdgNhomQuyen" resizableColumns="true" paginator="true"
                                             rows="10"
                                             value="#{apiOfficialsController.lazyDataModel}"
                                             lazy="true" pageLinks="5" paginatorPosition="top" var="resultDto"
                                             paginatorAlwaysVisible="true" rowsPerPageTemplate="10,20,50,100"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             currentPageReportTemplate="#{t['lbl.recordTotal']}: #{apiOfficialsController.lazyDataModel.rowCount}"
                                             emptyMessage="#{t['lbl.emptyTable']}" rowIndexVar="rowIndex"
                                             rowKey="#{resultDto.apiOfficialsId}">
                                    <p:column headerText="STT" width="30" style="text-align: center">
                                        <h:outputText value="#{rowIndex + 1}"/>
                                    </p:column>
                                    <p:column headerText="Điện thoại" sortBy="#{resultDto.phone}">
                                        <h:outputText value="#{resultDto.phone}"/>
                                    </p:column>
                                    <p:column headerText="Số CMND" sortBy="#{resultDto.identityCard}">
                                        <h:outputText value="#{resultDto.identityCard}"/>
                                    </p:column>
                                    <p:column headerText="Chức vụ" sortBy="#{resultDto.position}">
                                        <h:outputText value="#{resultDto.position}"/>
                                    </p:column>
                                    <p:column headerText="Nơi cấp CMND" sortBy="#{resultDto.placeIdentityCard}">
                                        <h:outputText value="#{resultDto.placeIdentityCard}"/>
                                    </p:column>
                                    <p:column headerText="Cơ quan" sortBy="#{resultDto.organization}">
                                        <h:outputText value="#{resultDto.organization}"/>
                                    </p:column>
                                    <p:column headerText="Họ tên" sortBy="#{resultDto.name}">
                                        <h:outputText value="#{resultDto.name}"/>
                                    </p:column>
                                    <p:column headerText="Ngày sinh" sortBy="#{resultDto.date}" style="text-align: center">
                                        <h:outputText value="#{resultDto.date}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Email" sortBy="#{resultDto.email}">
                                        <h:outputText value="#{resultDto.email}"/>
                                    </p:column>
                                    <p:column headerText="Ngày cấp CMND" sortBy="#{resultDto.dateIdentityCard}" style="text-align: center">
                                        <h:outputText value="#{resultDto.dateIdentityCard}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                </p:dataTable>
                            </p:panel>
                        </div>
                    </div>
                </div>
            </div>
        </h:form>
    </ui:define>
</ui:composition>
