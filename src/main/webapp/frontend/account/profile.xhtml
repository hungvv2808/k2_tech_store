<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/frontend/template/template.xhtml">

    <f:metadata>
        <f:event type="preRenderView" listener="#{authorizationFEController.initInfoAccount}"/>
    </f:metadata>
    <ui:define name="title">Tài khoản của tôi</ui:define>

    <ui:define name="body-content">
        <h:form role="form" id="profile" prependId="false" autocomplete="off">
            <div class="row">
                <div id="info">
                    <div class="col-lg-6">
                        <div class="form-group">
                            <div class="row">
                                <label class="col-md-4 col-sm-4 col-xs-12 required-label">Họ và tên:</label>
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    <h:inputText styleClass="form-control" name="person_name"
                                                 id="person_name" type="text" maxlength="50"
                                                 placeholder="Họ và tên"
                                                 onblur="this.value = this.value.trim()" autofocus=""
                                                 value="#{authorizationFEController.accountDto.fullName}"/>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="row">
                                <label class="col-md-4 col-sm-4 col-xs-12 required-label">Giới tính:</label>
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    <h:selectOneMenu styleClass="form-control" id="sex"
                                                     value="#{authorizationFEController.accountDto.sex}">
                                        <f:selectItem itemLabel="Chọn giới tính" itemValue=""/>
                                        <f:selectItems value="#{authorizationFEController.apiSexList}"/>
                                    </h:selectOneMenu>
                                </div>

                            </div>
                        </div>

                        <div class="form-group">
                            <div class="row">
                                <label class="col-md-4 col-sm-4 col-xs-12 required-label">Ngày sinh:</label>
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    <div class='input-group date'>
                                        <h:inputText styleClass="form-control datetimepicker"
                                                     id="person_ngaysinh"
                                                     value="#{authorizationFEController.accountDto.dateOfBirth}"
                                                     onfocus="focusRemoveReadOnly(this);"
                                                     placeholder="Chọn ngày sinh">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:inputText>
                                        <span class="input-group-addon"
                                              onclick="document.getElementById('person_ngaysinh').focus()"><i
                                                class="custom-icon calendar"/></span>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div class="form-group">
                            <div class="row">
                                <label class="col-md-4 col-sm-4 col-xs-12 required-label">Địa chỉ:</label>
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    <ui:include src="/frontend/common/address.xhtml"/>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="row">
                                <label class="col-md-4 col-sm-4 col-xs-12 required-label">Địa chỉ nhà:</label>
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    <h:inputText styleClass="form-control" name="address" id="address"
                                                 type="text" maxlength="100" placeholder="Địa chỉ nhà"
                                                 onblur="this.value = this.value.trim()"
                                                 value="#{authorizationFEController.accountDto.address}"/>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="row">
                                <label class="col-md-4 col-sm-4 col-xs-12 required-label">Số điện thoại:</label>
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    <h:inputText type="text"
                                                 onkeyup="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                                                 styleClass="form-control" name="person_phone_number"
                                                 id="person_phone_number"
                                                 placeholder="Nhập số điện thoại"
                                                 value="#{authorizationFEController.accountDto.phone}"
                                                 maxlength="11" size="12"/>
                                </div>

                            </div>
                        </div>

                        <div class="form-group">
                            <div class="row">
                                <label class="col-md-4 col-sm-4 col-xs-12 required-label">Email:</label>
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    <h:inputText styleClass="form-control" name="person_email"
                                                 type="email" id="person_email" maxlength="50"
                                                 disabled="#{authorizationFEController.accountDto.loginFromSso}"
                                                 title="#{authorizationFEController.accountDto.loginFromSso ? 'Không thể sửa email khi đăng nhập bằng SSO' : ''}"
                                                 value="#{authorizationFEController.accountDto.email}"
                                                 placeholder="Nhập Email"/>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="row">
                                <label class="col-md-4 col-sm-4 col-xs-12 required-label">Hộ khẩu thường trú:</label>
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    <h:inputText styleClass="form-control" name="person_address_now"
                                                 id="person_address_now" type="text" maxlength="150"
                                                 placeholder="Hộ khẩu thường trú"
                                                 onblur="this.value = this.value.trim()"
                                                 value="#{authorizationFEController.accountDto.permanentResidence}"/>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="row marital_status_check">
                                <div class="col-md-4 col-sm-4 col-xs-12">
                                    <label class="register-label">Tình trạng hôn nhân:</label>
                                </div>
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    <div class="row">
                                        <h:inputHidden id="married"
                                                       value="#{authorizationFEController.married}"/>
                                        <div class="col-md-6 col-xs-6 col-sm-6">
                                            <label class="radio">Độc thân
                                                <input type="radio" name="person_married"
                                                       value="alone" id="married_box_false"/>
                                                <span class="checkround"/>
                                            </label>
                                        </div>
                                        <div class="col-md-6 col-xs-6 col-sm-6">
                                            <label class="radio">Đã kết hôn
                                                <input type="radio" name="person_married"
                                                       value="married" id="married_box"/>
                                                <span class="checkround"/>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="marital_status" style="display: none;">
                            <div class="form-group">
                                <div class="row">
                                    <label class="col-md-4 col-sm-4 col-xs-12 required-label">Họ tên vợ/chồng:</label>
                                    <div class="col-md-8 col-sm-8 col-xs-12">
                                        <h:inputText styleClass="form-control" name="marriage_name"
                                                     id="marriage_name" placeholder="Họ tên vợ/chồng"
                                                     type="text"
                                                     onblur="this.value = this.value.trim()"
                                                     value="#{authorizationFEController.accountDto.relativeName}"
                                                     maxlength="100"/>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row">
                                    <label class="col-md-4 col-sm-4 col-xs-12 required-label"
                                           style="padding: 0px; left: 15px !important;">Số CMND/CCCD vợ/chồng:</label>
                                    <div class="col-md-8 col-sm-8 col-xs-12">
                                        <h:inputText styleClass="form-control" name="marriage_id"
                                                     id="marriage_id" placeholder="Nhập Số CMND/CCCD"
                                                     type="text"
                                                     onkeyup="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                                                     value="#{authorizationFEController.accountDto.relativeIdCardNumber}"
                                                     maxlength="12"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="form-group">
                            <div class="row">
                                <label class="col-md-4 col-sm-4 col-xs-12 required-label">Tên đăng nhập:</label>
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    <h:inputText class="form-control" id="person_full_name"
                                                 type="text" placeholder="Tên đăng nhập"
                                                 onkeyup="this.value=this.value.replace(/[^\w\d\.\_]/g, '');"
                                                 maxlength="50"
                                                 disabled="true"
                                                 value="#{authorizationFEController.accountDto.username}"/>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="row">
                                <label class="col-md-4 col-sm-4 col-xs-12 required-label">Số CMND/CCCD:</label>
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    <h:inputText class="form-control" name="person_cmnd"
                                                 id="person_cmnd" type="text"
                                                 placeholder="Nhập Số CMND/CCCD"
                                                 onkeyup="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                                                 value="#{authorizationFEController.accountDto.idCardNumber}"
                                                 maxlength="12" size="13"/>
                                </div>
                            </div>
                        </div>

                        <ui:include src="/common/frontend/upload-card-id-personal.xhtml"/>

                        <div class="form-group">
                            <div class="row">
                                <label class="col-md-4 col-sm-4 col-xs-12 required-label">Nơi cấp:</label>
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    <h:selectOneMenu styleClass="form-control tinhThanhpho_select"
                                                     name="person_noicap" id="person_noicap"
                                                     value="#{authorizationFEController.accountDto.provinceIdOfIssue}">
                                        <f:selectItem itemValue="" itemLabel="Chọn Tỉnh/Thành phố"/>
                                        <f:selectItems
                                                value="#{authorizationFEController.listProvinceAccount}"/>
                                    </h:selectOneMenu>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="row">
                                <label class="col-md-4 col-sm-4 col-xs-12 required-label">Ngày cấp:</label>
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    <div class='input-group date'>
                                        <h:inputText styleClass="form-control datetimepicker1"
                                                     placeholder="Chọn ngày cấp"
                                                     name="person_ngaycap" id="person_ngaycap"
                                                     onfocus="focusRemoveReadOnly(this);"
                                                     value="#{authorizationFEController.accountDto.dateOfIssue}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                                        </h:inputText>
                                        <span class="input-group-addon"
                                              onclick="document.getElementById('person_ngaycap').focus()"><i
                                                class="custom-icon calendar"/>
                                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <ui:include src="/common/frontend/upload-image-avatar.xhtml"/>
                    </div>
                </div>
                <div class="row mt-30">
                    <div class="col-lg-12 submit-area text-center">
                        <input id="btnUpdate" onclick="validateForm();"
                               class="btn btn-success btn-custom" value="Cập nhật" type="submit"/>
                        <h:commandButton id="updatePerson" style="display: none !important;"
                                         action="#{authorizationFEController.onSaveData}">
                            <f:ajax execute="@form" render="btnUpdate #{Constant.ERROR_FE_GROWL_ID}"/>
                        </h:commandButton>
                    </div>
                </div>
            </div>

        </h:form>
    </ui:define>

    <ui:define name="jslibrary">
        <script>
            $(".datetimepicker,.datetimepicker1").mask('99/99/9999');

            function focusRemoveReadOnly(e) {
                if (e.getAttribute('readonly') !== null) {
                    e.removeAttribute('readonly');
                    e.blur();
                    setTimeout(function () {
                        e.focus();
                    }, 10)
                }
            }
        </script>
    </ui:define>

</ui:composition>
