<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!-->
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:o="http://omnifaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
<!--<![endif]-->

<f:view locale="#{languageController.currentLocale}">
    <o:importConstants type="vn.zeus.website.store.util.Constant"/>
    <o:importConstants type="vn.zeus.website.store.util.DbConstant"/>

    <h:head>
        <f:facet name="first">
            <meta charset="UTF-8"/>
            <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
            <meta http-equiv="X-UA-Compatible" content="IE=11"/>
            <meta name="author" content="K2"/>
            <meta name="keywords" content="k2 tech store"/>
            <meta name="description" content="K2 technology store, Design by K2 Software"/>
        </f:facet>

        <title><ui:insert name="title">Đấu giá trực tuyến</ui:insert></title>

        <link rel="profile" href="http://gmpg.org/xfn/11"/>
        <link type="image/x-icon" href="#{resource['frontend-layout:css/favicon.ico']}" rel="icon"/>
        <h:outputStylesheet name="css/jquery/jquery.dataTables.min.css" library="frontend-layout"/>
        <h:outputStylesheet name="css/jquery/responsive.dataTables.min.css" library="frontend-layout"/>
        <h:outputStylesheet name="css/bootstrap/bootstrap.min.css" library="frontend-layout"/>
        <h:outputStylesheet name="css/bootstrap-datetimepicker.min.css" library="frontend-layout"/>
        <h:outputStylesheet name="css/font-awesome.min.css" library="frontend-layout"/>
        <h:outputStylesheet name="css/jquery.fancybox.css" library="frontend-layout"/>
        <h:outputStylesheet name="css/slick.css" library="frontend-layout"/>
        <h:outputStylesheet name="plugin/datatables/custom.css" library="frontend-layout"/>
        <h:outputStylesheet name="css/pe-icon/pe-icon-7-stroke.css" library="frontend-layout"/>
        <h:outputStylesheet name="css/style.css" library="frontend-layout"/>
        <h:outputStylesheet name="css/style_responsive.css" library="frontend-layout"/>
        <h:outputStylesheet name="css/simpleNotifyStyle.css" library="frontend-layout"/>
        <h:outputStylesheet name="plugin/select2/css/select2.min.css" library="frontend-layout"/>

        <ui:insert name="head"/>
    </h:head>

    <h:body styleClass="#{bodyStyleClass}">
        <div class="wapper">
            <header class="header #{headerStyleClass}">
                <ui:include src="header.xhtml"/>
            </header>

            <ui:insert name="main-slide"/>

            <div class="main #{mainStyleClass}">
                <ui:insert name="main"/>
            </div>

            <footer class="footer">
                <ui:include src="footer.xhtml"/>
            </footer>
        </div>

        <c:if test="#{!authorizationFEController.hasLogged()}">
            <ui:include src="/frontend/common/modal_login.xhtml"/>
            <ui:include src="/frontend/common/modal_register.xhtml"/>
            <ui:include src="/frontend/common/modal_lost_password.xhtml"/>
            <ui:include src="/frontend/common/create_new_password.xhtml"/>
        </c:if>

        <ui:include src="/frontend/common/change_password.xhtml"/>
        <ui:include src="/frontend/common/modal_register_store.xhtml"/>

        <div class="loading style-2"></div>

        <h:outputScript>var urlContext = "#{request.contextPath}";</h:outputScript>
        <h:outputScript name="js/jquery.js" library="frontend-layout"/>
        <h:outputScript name="js/jquery-ui.js" library="frontend-layout"/>
        <h:outputScript name="js/jquery.validate.min.js" library="frontend-layout"/>
        <h:outputScript name="plugin/select2/js/select2.min.js" library="frontend-layout"/>
        <h:outputScript name="js/moment.js" library="frontend-layout"/>
        <h:outputScript name="js/bootstrap/bootstrap.min.js" library="frontend-layout"/>
        <h:outputScript name="js/bootstrap-datetimepicker.min.js" library="frontend-layout"/>
        <h:outputScript name="js/slick.min.js" library="frontend-layout"/>
        <h:outputScript name="js/countdown.js" library="frontend-layout"/>
        <h:outputScript name="custom.js" library="myjs"/>
        <h:outputScript name="js/custom-slick.js" library="frontend-layout"/>
        <h:panelGroup id="#{Constant.ID_COUNTDOWN_LIBRARY}">
            <script>
                onloadCountdown();
            </script>
        </h:panelGroup>
        <h:outputScript name="js/jquery.fancybox.js" library="frontend-layout"/>
        <h:outputScript name="plugin/datatables/datatables.min.js" library="frontend-layout"/>
        <h:outputScript name="js/pdfobject.js" library="frontend-layout"/>
        <h:outputScript name="js/autoNumeric.js" library="frontend-layout"/>

        <!-- bootbox code -->
        <h:outputScript name="plugin/bootbox/bootbox.min.js" library="frontend-layout"/>
        <h:outputScript name="plugin/bootbox/bootbox.locales.min.js" library="frontend-layout"/>

        <!-- vgca code -->
        <h:outputScript name="js/vgca/base64.js" library="frontend-layout"/>
        <h:outputScript name="js/vgca/vgcaplugin.js" library="frontend-layout"/>
        <h:outputScript name="js/vgca/vgcasign.js" library="frontend-layout"/>

        <!-- app -->
        <h:outputScript name="js/custom.js" library="frontend-layout"/>
        <h:outputScript name="js/validate-custom.js" library="frontend-layout"/>
        <h:outputScript name="js/simpleNotify.js" library="frontend-layout"/>
        <h:outputScript name="js/jquery.mask.js" library="frontend-layout"/>
        <h:outputScript name="js/jquery-migrate-1.4.1.min.js" library="frontend-layout" target="head"/>
        <h:outputScript name="js/crypto/aes.js" library="apollo-layout" target="head"/>
        <script src="https://www.google.com/recaptcha/api.js"></script>

        <ui:include src="common.xhtml"/>

        <ui:insert name="jslibrary"/>

        <script>
            jQuery(document).ready(function () {
                jQuery('.choice-type input[type="radio"]').click(function () {
                    var inputValue = jQuery(this).attr("value");
                    var targetBox = jQuery("." + inputValue);
                    jQuery(".box").not(targetBox).hide();
                    jQuery(targetBox).show();
                    if (inputValue == 'company') {
                        jQuery('#orgCompany').val("#{DbConstant.ACCOUNT_COMPANY}");
                        focusInput("c_name");
                    } else {
                        jQuery('#org').val("#{!DbConstant.ACCOUNT_COMPANY}");
                        focusInput("person_name");
                    }
                });


                if (jQuery('#married').val() === 'true') {
                    jQuery('#married_box').click();
                    jQuery('#marital_status').show();
                    jQuery('#married').val("#{DbConstant.ACCOUNT_MARRIED}");
                }
                if (jQuery('#married').val() === 'false') {
                    jQuery("#married_box_false").click();
                    jQuery('#marital_status').hide();
                    jQuery('#married').val("#{!DbConstant.ACCOUNT_MARRIED}");
                }
            });

            function onShowLostPassword() {
                jQuery("#code").hide();
                jQuery("#checkEmail").val("Lấy mã xác nhận");
                jQuery("#checkEmail").show();
                jQuery("#checkCode").hide();
                jQuery("#endTime").hide();
                jQuery("#countdownEx").hide();
                jQuery("#countdownEx").text('');
                jQuery('#lostpass_email').removeAttr('readonly');
                clearInterval(timerLostPassword)

            }
            function onTakeNewCode() {
                jQuery("#inputCode").show();
                jQuery("#checkCode").hide();
                jQuery("#countdownParent").hide();
                jQuery("#endTime").show();
                jQuery("#getNewCode").show();
            }
        </script>

        <h:panelGroup id="scriptResetListener">
            <script>
                //<![CDATA[
                jQuery(document).ready(function () {
                    jQuery('.marital_status_check input[type="radio"]').click(function () {
                        var inputValue = jQuery(this).attr("value");
                        if (inputValue === 'married') {
                            jQuery('#marital_status').show();
                            jQuery('#married').val("#{DbConstant.ACCOUNT_MARRIED}");
                        } else {
                            jQuery('#marital_status').hide();
                            jQuery('#married').val("#{!DbConstant.ACCOUNT_MARRIED}");
                        }
                    });
                });

                jQuery(function () {
                    jQuery('.datetimepicker').datetimepicker({
                        format: 'DD/MM/YYYY',
                        maxDate: moment(),
                        minDate: '01/01/1900',
                        useCurrent: false
                    });

                    jQuery('.datetimepicker1').datetimepicker({
                        format: 'DD/MM/YYYY',
                        minDate: "01/01/1900",
                        useCurrent: false
                    });

                    var d1 = jQuery('.datetimepicker1.fromDate');
                    var d2 = jQuery('.datetimepicker1.toDate');

                    d1.datetimepicker({
                        format: 'DD/MM/YYYY',
                        minDate: "01/01/1900",
                        maxDate: d2.val() === "" ? false : moment(d2.val()).format('DD-MM-YYYY'),
                        useCurrent: false
                    });
                    d2.datetimepicker({
                        format: 'DD/MM/YYYY',
                        minDate: d1.val() === "" ? '01/01/1900' : moment(d1.val()).format('DD-MM-YYYY'),
                        useCurrent: false
                    });
                    d1.on("dp.change", function (e) {
                        console.log(e.date);
                        d2.data("DateTimePicker").minDate(e.date);
                    });
                    d2.on("dp.change", function (e) {
                        d1.data("DateTimePicker").maxDate(e.date);
                    });
                });

                jQuery('.tinhThanhpho_select').select2({
                    placeholder: 'Lựa chọn tỉnh/thành phố',
                    width: '100%'
                });

                jQuery('.noicap_select').select2({
                    placeholder: 'Lựa chọn tỉnh/thành phố',
                    width: '100%'
                });

                jQuery('.quanhuyen_select').select2({
                    placeholder: 'Lựa chọn quận/huyện',
                    width: '100%'
                });

                jQuery('.phuongxa_select').select2({
                    placeholder: 'Lựa chọn phường/xã',
                    width: '100%'
                });

                jQuery("#select2-tinhThanhpho-container").on('DOMSubtreeModified',function(){
                    jQuery("#tinhThanhpho-error").remove();
                    jQuery("#tinhThanhpho").parents(".col-md-4").addClass("has-success").removeClass("has-error");
                })

                jQuery("#select2-quanhuyen-container").on('DOMSubtreeModified',function(){
                    jQuery("#quanhuyen-error").remove();
                    jQuery("#quanhuyen").parents(".col-md-4").addClass("has-success").removeClass("has-error");
                })

                jQuery("#select2-phuongxa-container").on('DOMSubtreeModified',function(){
                    jQuery("#phuongxa-error").remove();
                    jQuery("#phuongxa").parents(".col-md-4").addClass("has-success").removeClass("has-error");
                })

                jQuery("#select2-quanHuyen-container").on('DOMSubtreeModified',function(){
                    jQuery("#quanHuyen-error").remove();
                    jQuery("#quanHuyen").parents(".col-md-4").addClass("has-success").removeClass("has-error");
                })

                jQuery("#select2-phuongXa-container").on('DOMSubtreeModified',function(){
                    jQuery("#phuongXa-error").remove();
                    jQuery("#phuongXa").parents(".col-md-4").addClass("has-success").removeClass("has-error");
                })

                jQuery("#select2-tinhThanhPho-container").on('DOMSubtreeModified',function(){
                    jQuery("#tinhThanhPho-error").remove();
                    jQuery("#tinhThanhPho").parents(".col-md-4").addClass("has-success").removeClass("has-error");
                })


                jQuery(".email, .password, .phone, .username, .fromDate, .toDate, .datetimepicker1, .datetimepicker").attr('readonly', 'readonly');
                jQuery('.related-asset-slide').slick({
                    slidesToShow: 4,
                    slidesToScroll: 1,
                    dots: false,
                    arrows: true,
                    nextArrow: '<button class="btn-prev"><i class="fa fa-angle-right"></i></button>',
                    prevArrow: '<button class="btn-next"><i class="fa fa-angle-left"></i></button>',
                infinite: true,
                autoplay: true,
                autoplaySpeed: 3000,
                speed: 300,
                responsive: [{
                    breakpoint: 1199,
                    settings: {
                        slidesToShow: 3,
                        slidesToScroll: 1,
                        arrows: true,
                    }
                },
                {
                    breakpoint: 992,
                    settings: {
                        slidesToShow: 2,
                        slidesToScroll: 1,
                        arrows: false,
                    }
                },
                {
                    breakpoint: 480,
                        settings: {
                            slidesToShow: 1,
                            slidesToScroll: 1,
                            arrows: false,
                        }
                }
                ]
                });
                validateForm();
                // autonumeric
                jQuery(document).ready(function () {
                    jQuery('.autonumber').autoNumeric('init', {mDec: '0'});
                });
                //]]>
            </script>
        </h:panelGroup>

        <h:outputScript name="js/language/modal.js" library="frontend-layout"/>
        <h:outputScript name="js/listener-client.js" library="frontend-layout"/>
        <h:outputScript name="listener.js" library="myjs"/>

        <h:panelGroup id="notification">
            <script>
                //<![CDATA[
                jQuery('.btn').not('.no-processing').on('click', function() {
                    var $this = jQuery(this);
                    if ("BUTTON,A".indexOf($this.prop("tagName")) > -1) {
                        $this.data('loading-text', "<i class='fa fa-circle-o-notch fa-spin'></i> Đang xử lý...");
                    } else {
                        $this.data('loading-text', "ĐANG XỬ LÝ...");
                    }
                    $this.button('loading');
                    setTimeout(function() {
                        $this.button('reset');
                    }, 2000);
                });
                jQuery(document).on('show.bs.modal', '.modal', function (event) {
                    var zIndex = 1040 + (10 * jQuery('.modal:visible').length);
                    jQuery(this).css('z-index', zIndex);
                    setTimeout(function() {
                        jQuery('.modal-backdrop').not('.modal-stack').css('z-index', zIndex - 1).addClass('modal-stack');
                    }, 0);
                });

                jQuery(document).ready(function () {
                    jQuery('input').tooltip({
                        placement: 'right'
                    });
                });
                //]]>
            </script>
            <h:outputScript rendered="#{not empty facesNoticeController.script}">
                #{facesNoticeController.output()}
            </h:outputScript>
        </h:panelGroup>
        <script>
            //<![CDATA[
            // disable backspace function on IE
            jQuery(document).keydown(function(e){
                if (e.keyCode === 8 && ('INPUT,TEXTAREA'.indexOf(e.target.tagName) < 0 || e.target.readOnly))
                    e.preventDefault();
            });
            //]]>
        </script>

        <ui:include src="/frontend/common/modal_notification.xhtml"/>

        <div class="overlay"></div>
        <a class="scroll-to-top"><i class="pe-7s-angle-up"/></a>
    </h:body>
</f:view>

</html>
