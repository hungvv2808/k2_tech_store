<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        xmlns:c="http://java.sun.com/jsp/jstl/core"
        xmlns:f="http://xmlns.jcp.org/jsf/core">

    <f:metadata>
        <f:event type="preRenderView" listener="#{notificationFEController.initData}"/>
    </f:metadata>

    <nav class="navbar navbar-expand-lg navbar-light bg-light navbar-fixed-top" id="navbar">
        <h:link styleClass="navbar-brand" outcome="/frontend/index.html">
            <img src="#{resource['frontend-layout:img/logo.png']}" class="d-inline-block align-top" alt="logo"
                 style="width: 100%; height: 50px; object-fit: cover;"/>
        </h:link>
        <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="icon-bar"/>
            <span class="icon-bar"/>
            <span class="icon-bar"/>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="nav navbar-nav navbar-primary ml-auto">
                <li class="nav-item active">
                    <h:link styleClass="nav-link nav-link__home" outcome="/frontend/index.html">
                        <i class="fas fa-home"/>
                        <span class="uppercase">Trang chủ</span>
                        <span class="sr-only">(current)</span>
                    </h:link>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarNews" role="button" data-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false">
                        <i class="far fa-newspaper"/>
                        <span class="uppercase">Tin tức</span>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarNews">
                        <h:link class="dropdown-item" outcome="/frontend/news/list-news.xhtml">
                            <i class="far fa-newspaper"/>
                            <span>Tất cả tin tức</span>
                        </h:link>
                        <h:link class="dropdown-item" outcome="/frontend/news/list-news.xhtml?catid=#{Constant.CATE_NEWS_HOT}">
                            <i class="fas fa-fire-alt"/>
                            <span>Tin tức nóng</span>
                        </h:link>
                        <h:link class="dropdown-item" outcome="/frontend/news/list-news.xhtml?catid=#{Constant.CATE_NEWS_HIGHLIGHT}">
                            <i class="fas fa-highlighter"/>
                            <span>Tin tức nổi bật</span>
                        </h:link>
                        <h:link class="dropdown-item" outcome="/frontend/news/list-news.xhtml?catid=#{Constant.CATE_NEWS_TECH}">
                            <i class="fas fa-microchip"/>
                            <span>Tin tức công nghệ</span>
                        </h:link>
                        <h:link class="dropdown-item" outcome="/frontend/news/list-news.xhtml?catid=#{Constant.CATE_NEWS_PRODUCT}">
                            <i class="far fa-plus-square"/>
                            <span>Tin tức sản phẩm mới</span>
                        </h:link>
                        <h:link class="dropdown-item" outcome="/frontend/news/list-news.xhtml?catid=#{Constant.CATE_NEWS_DISCOUNT}">
                            <i class="fas fa-percentage"/>
                            <span>Tin tức khuyến mãi</span>
                        </h:link>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarProducts" role="button"
                       data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fas fa-shopping-cart"/>
                        <span class="uppercase">Sản phẩm</span>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarProducts">
                        <h:link class="dropdown-item" outcome="/frontend/product/product.xhtml">
                            <i class="fas fa-cart-plus"/>
                            <span>Tất cả sản phẩm</span>
                        </h:link>
                        <h:link class="dropdown-item" outcome="/frontend/product/product.xhtml?catid=#{Constant.CATE_PHONE}">
                            <i class="fas fa-mobile-alt"/>
                            <span>Danh sách điện thoại</span>
                        </h:link>
                        <h:link class="dropdown-item" outcome="/frontend/product/product.xhtml?catid=#{Constant.CATE_LAPTOP}">
                            <i class="fas fa-laptop"/>
                            <span>Danh sách máy tính</span>
                        </h:link>
                        <h:link class="dropdown-item" outcome="/frontend/product/product.xhtml?catid=#{Constant.CATE_WATCH}">
                            <i class="fas fa-clock"/>
                            <span>Danh sách đồng hồ</span>
                        </h:link>
                        <h:link class="dropdown-item" outcome="/frontend/product/product.xhtml?catid=#{Constant.CATE_HEADPHONE}">
                            <i class="fas fa-headphones-alt"/>
                            <span>Danh sách tai nghe</span>
                        </h:link>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarOrders" role="button" data-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false">
                        <i class="fas fa-cart-arrow-down"/>
                        <span class="uppercase">Đơn hàng</span>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarOders">
                        <h:link class="dropdown-item" outcome="/frontend/order/my-orders.xhtml">
                            <i class="fas fa-cart-arrow-down"/>
                            <span>Giỏ hàng</span>
                        </h:link>
                        <h:link class="dropdown-item" outcome="/frontend/order/my-orders.xhtml" rendered="#{authorizationFEController.hasLogged()}">
                            <i class="fas fa-wallet"/>
                            <span>Hoá đơn</span>
                        </h:link>
                    </div>
                </li>

                <h:panelGroup rendered="#{!authorizationFEController.hasLogged()}">
                    <li class="nav-item">
                        <a class="nav-link nav-link__login" data-toggle="modal" data-target="#login-modal">
                            <i class="fas fa-sign-in-alt"/>
                            <span class="uppercase">Đăng nhập</span>
                        </a>
                    </li>
                </h:panelGroup>

                <h:panelGroup rendered="#{authorizationFEController.hasLogged()}">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle dropdown-toggle__profile" href="#" id="navbarProfile"
                           role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <div class="profile">
                                <p:graphicImage styleClass="profile__avatar"
                                                name="#{authorizationFEController.accountDto.imagePath == null ? resource['frontend-layout:img/founder.jpg'] : authorizationFEController.accountDto.imagePath}"/>
                                <span class="profile__name">#{authorizationFEController.accountDto.fullName == null ? 'Vũ Văn Hùng' : authorizationFEController.accountDto.fullName}</span>
                            </div>
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarProfile">
                            <a class="dropdown-item" href="#">
                                <i class="fas fa-user"/>
                                <span>Thông tin cá nhân</span>
                            </a>
                            <h:form>
                                <h:commandLink styleClass="dropdown-item" onclick="logout();" actionListener="#{authorizationFEController.logout}">
                                    <i class="fas fa-sign-out-alt"/>
                                    <span>Đăng xuất</span>
                                </h:commandLink>
                            </h:form>
                        </div>
                    </li>
                    <li class="nav-item nav-item__last-child dropdown">
                        <div>
                        <a class="nav-link dropdown-toggle" href="#" id="navbarNotis" role="button"
                           data-toggle="dropdown"
                           aria-haspopup="true" aria-expanded="false">
                            <div class="noti">
                                <i class="far fa-bell fa-lg noti__bell"/>
                                <span class="noti__count">100+</span>
                            </div>
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarNotis">
                            <a class="dropdown-item" href="#">
                                <span>Bạn có thông báo mới từ Admin với nội dung: "Alo alo admin on the mic. Mic check mic check"</span>
                                <br/>
                                <i>7 giờ trước</i>
                            </a>
                        </div>
                        </div>
                    </li>
                </h:panelGroup>
            </ul>
            <form class="form-inline">
                <i class="fas fa-search fa-sm search-function" onclick="searchClick(true);"/>
                <div class="search-function__input">
                    <p:inputText id="txtSearch" class="form-control mr-sm-2 nav-search" type="search" placeholder="Tìm kiếm"
                                 aria-label="Tìm kiếm" value="#{productFEController.searchDto.keyword}"
                                 onkeyup="searchEnter(e);"/>
                    <p:commandButton id="btnSearch" actionListener="#{productFEController.initData}" style="display: none"/>
                    <i class="fas fa-times fa-sm search-cancel" onclick="searchClick(false);"/>
                </div>
            </form>
        </div>
    </nav>

</ui:composition>