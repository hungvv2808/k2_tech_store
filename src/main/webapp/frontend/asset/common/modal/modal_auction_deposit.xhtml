<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        xmlns:c="http://java.sun.com/jsp/jstl/core">

    <c:set var="task" value="#{auctionTask.getAssetDtoList().get(auctionController.assetId)}"/>
    <c:if test="#{controller == null}">
        <c:set var="controller" value="#{auctionController}"/>
    </c:if>

    <!-- Modal Auction Deposit -->
    <div class="modal fade" tabindex="-1" data-backdrop="static" data-keyboard="false" role="dialog" id="depositPopup">
        <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button id="close_depositPopup" type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&#xd7;</span>
                    </button>
                    <h5 class="modal-title">Thông báo</h5>
                </div>
                <div class="modal-body">
                    <p>Bạn đã bị truất quyền vì lý do: </p>
                    <h:panelGroup id="#{Constant.AREA_MODAL_DEPOSIT}">
                        <p>#{controller.auctionRegister.reasonDeposition}</p>
                        <h:panelGroup rendered="#{not empty controller.auctionRegister.filePath}">
                            <div style="margin-top: 5px;">
                                <h:panelGroup style="text-align: center;"
                                              rendered="#{!commonController.isPdfFile(controller.auctionRegister.filePath)}">
                                    <p>Tải xuống file lý do bị truất quyền</p>
                                    <p>
                                        <h:form>
                                            <h:commandButton class="btn btn-custom main-color"
                                                             style="margin-top: 5px; height: 35px; float: none;" value="Tải xuống"
                                                             actionListener="#{commonController.download(controller.auctionRegister.filePath)}"/>
                                        </h:form>
                                    </p>
                                </h:panelGroup>
                                <h:panelGroup rendered="#{commonController.isPdfFile(controller.auctionRegister.filePath)}">
                                    <p style="margin-top: 15px;">Nội dung file đính kèm: </p>
                                    <div class="document-viewer">
                                        <object data="#{resource[controller.auctionRegister.filePath]}" type="application/pdf" width="100%" height="500px">
                                            <p style="padding: 20px 50px 0;">Nếu trình duyệt của bạn không có PDF plugin. <a style="display: inline;" href="#{resource[controller.auctionRegister.filePath]}">Nhấn vào đây để tải xuống file PDF.</a></p>
                                        </object>
                                    </div>
                                </h:panelGroup>
                            </div>
                        </h:panelGroup>
                    </h:panelGroup>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary no-processing" data-dismiss="modal">Đóng</button>
                </div>
            </div>
        </div>
    </div>

    <p:remoteCommand name="cmdRefreshDeposit" update="#{Constant.AREA_MODAL_DEPOSIT} #{Constant.AREA_BUTTON}"
                     oncomplete="jQuery('#depositPopup').modal('show');"
                     actionListener="#{auctionController.loadAuctionRegister()}"/>

</ui:composition>
